<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>7 Exercises | AnVIL Demos</title>
  <meta name="description" content="Description about Course/Book." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="7 Exercises | AnVIL Demos" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Description about Course/Book." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7 Exercises | AnVIL Demos" />
  
  <meta name="twitter:description" content="Description about Course/Book." />
  



<meta name="date" content="2023-06-26" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="assets/AnVIL_style/anvil_favicon.ico" type="image/x-icon" />
<link rel="prev" href="scale-with-workflows-preparation.html"/>
<link rel="next" href="scale-with-workflows-instructor-guide.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
  
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-L4S1S1ZKYM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-L4S1S1ZKYM');
</script>




<link rel="stylesheet" href="assets/style.css" type="text/css" />
<link rel="stylesheet" href="assets/AnVIL_style/anvil.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<a href="https://anvilproject.org/" target="_blank"><img src="assets/AnVIL_style/logo-anvil.png" style="width: 80%; padding-left: 15px; padding-top: 8px;"</a>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this Series</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#upcoming-anvil-events"><i class="fa fa-check"></i>Upcoming AnVIL Events</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#anvil-collection"><i class="fa fa-check"></i>AnVIL Collection</a></li>
</ul></li>
<li class="part"><span><b>What is AnVIL</b></span></li>
<li class="chapter" data-level="1" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i><b>1</b> Overview</a>
<ul>
<li class="chapter" data-level="1.1" data-path="overview.html"><a href="overview.html#background"><i class="fa fa-check"></i><b>1.1</b> Background</a></li>
<li class="chapter" data-level="1.2" data-path="overview.html"><a href="overview.html#about-this-demo"><i class="fa fa-check"></i><b>1.2</b> About this Demo</a></li>
<li class="chapter" data-level="1.3" data-path="overview.html"><a href="overview.html#skills-level"><i class="fa fa-check"></i><b>1.3</b> Skills Level</a></li>
<li class="chapter" data-level="1.4" data-path="overview.html"><a href="overview.html#learning-objectives"><i class="fa fa-check"></i><b>1.4</b> Learning Objectives</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="preparation.html"><a href="preparation.html"><i class="fa fa-check"></i><b>2</b> Preparation</a>
<ul>
<li class="chapter" data-level="2.1" data-path="preparation.html"><a href="preparation.html#review-key-concepts"><i class="fa fa-check"></i><b>2.1</b> Review Key Concepts</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="exercises.html"><a href="exercises.html"><i class="fa fa-check"></i><b>3</b> Exercises</a>
<ul>
<li class="chapter" data-level="3.1" data-path="exercises.html"><a href="exercises.html#launch-terra"><i class="fa fa-check"></i><b>3.1</b> Launch Terra</a></li>
<li class="chapter" data-level="3.2" data-path="exercises.html"><a href="exercises.html#clone-hprc-workspace"><i class="fa fa-check"></i><b>3.2</b> Clone HPRC Workspace</a></li>
<li class="chapter" data-level="3.3" data-path="exercises.html"><a href="exercises.html#start-a-cloud-environment"><i class="fa fa-check"></i><b>3.3</b> Start a Cloud Environment</a></li>
<li class="chapter" data-level="3.4" data-path="exercises.html"><a href="exercises.html#find-tidbits"><i class="fa fa-check"></i><b>3.4</b> Find Tidbits</a></li>
<li class="chapter" data-level="3.5" data-path="exercises.html"><a href="exercises.html#enter-terminal"><i class="fa fa-check"></i><b>3.5</b> Enter Terminal</a></li>
<li class="chapter" data-level="3.6" data-path="exercises.html"><a href="exercises.html#exercise-6-shut-down"><i class="fa fa-check"></i><b>3.6</b> Exercise 6: Shut Down</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="instructor-guide.html"><a href="instructor-guide.html"><i class="fa fa-check"></i><b>4</b> Instructor Guide</a>
<ul>
<li class="chapter" data-level="4.1" data-path="instructor-guide.html"><a href="instructor-guide.html#timeline"><i class="fa fa-check"></i><b>4.1</b> Timeline</a></li>
</ul></li>
<li class="part"><span><b>Scale with Workflows</b></span></li>
<li class="chapter" data-level="5" data-path="scale-with-workflows-overview.html"><a href="scale-with-workflows-overview.html"><i class="fa fa-check"></i><b>5</b> Overview</a>
<ul>
<li class="chapter" data-level="5.1" data-path="scale-with-workflows-overview.html"><a href="scale-with-workflows-overview.html#skills-level-1"><i class="fa fa-check"></i><b>5.1</b> Skills Level</a></li>
<li class="chapter" data-level="5.2" data-path="scale-with-workflows-overview.html"><a href="scale-with-workflows-overview.html#learning-objectives-1"><i class="fa fa-check"></i><b>5.2</b> Learning Objectives</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="scale-with-workflows-preparation.html"><a href="scale-with-workflows-preparation.html"><i class="fa fa-check"></i><b>6</b> Preparation</a>
<ul>
<li class="chapter" data-level="6.1" data-path="scale-with-workflows-preparation.html"><a href="scale-with-workflows-preparation.html#review-key-concepts-1"><i class="fa fa-check"></i><b>6.1</b> Review Key Concepts</a></li>
<li class="chapter" data-level="6.2" data-path="scale-with-workflows-preparation.html"><a href="scale-with-workflows-preparation.html#create-anvil-account"><i class="fa fa-check"></i><b>6.2</b> Create AnVIL account</a></li>
<li class="chapter" data-level="6.3" data-path="scale-with-workflows-preparation.html"><a href="scale-with-workflows-preparation.html#clone-workspace"><i class="fa fa-check"></i><b>6.3</b> Clone Workspace</a></li>
<li class="chapter" data-level="6.4" data-path="scale-with-workflows-preparation.html"><a href="scale-with-workflows-preparation.html#start-cloud-environment"><i class="fa fa-check"></i><b>6.4</b> Start Cloud Environment</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="scale-with-workflows-exercises.html"><a href="scale-with-workflows-exercises.html"><i class="fa fa-check"></i><b>7</b> Exercises</a>
<ul>
<li class="chapter" data-level="7.1" data-path="scale-with-workflows-exercises.html"><a href="scale-with-workflows-exercises.html#explore-dataset-catalog"><i class="fa fa-check"></i><b>7.1</b> Explore Dataset Catalog</a></li>
<li class="chapter" data-level="7.2" data-path="scale-with-workflows-exercises.html"><a href="scale-with-workflows-exercises.html#explore-hprc-workspace"><i class="fa fa-check"></i><b>7.2</b> Explore HPRC Workspace</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="scale-with-workflows-exercises.html"><a href="scale-with-workflows-exercises.html#what-is-a-workspace"><i class="fa fa-check"></i><b>7.2.1</b> What is a Workspace?</a></li>
<li class="chapter" data-level="7.2.2" data-path="scale-with-workflows-exercises.html"><a href="scale-with-workflows-exercises.html#dashboard"><i class="fa fa-check"></i><b>7.2.2</b> Dashboard</a></li>
<li class="chapter" data-level="7.2.3" data-path="scale-with-workflows-exercises.html"><a href="scale-with-workflows-exercises.html#data"><i class="fa fa-check"></i><b>7.2.3</b> Data</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="scale-with-workflows-exercises.html"><a href="scale-with-workflows-exercises.html#combine-data-workspace"><i class="fa fa-check"></i><b>7.3</b> Combine Data Workspace</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="scale-with-workflows-exercises.html"><a href="scale-with-workflows-exercises.html#open-your-workspace"><i class="fa fa-check"></i><b>7.3.1</b> Open your Workspace</a></li>
<li class="chapter" data-level="7.3.2" data-path="scale-with-workflows-exercises.html"><a href="scale-with-workflows-exercises.html#open-jupyter-notebook"><i class="fa fa-check"></i><b>7.3.2</b> Open Jupyter Notebook</a></li>
<li class="chapter" data-level="7.3.3" data-path="scale-with-workflows-exercises.html"><a href="scale-with-workflows-exercises.html#load-packages"><i class="fa fa-check"></i><b>7.3.3</b> Load Packages</a></li>
<li class="chapter" data-level="7.3.4" data-path="scale-with-workflows-exercises.html"><a href="scale-with-workflows-exercises.html#retrieve-original-file-locations"><i class="fa fa-check"></i><b>7.3.4</b> Retrieve original file locations</a></li>
<li class="chapter" data-level="7.3.5" data-path="scale-with-workflows-exercises.html"><a href="scale-with-workflows-exercises.html#exported-combined-data-table"><i class="fa fa-check"></i><b>7.3.5</b> Exported combined Data Table</a></li>
<li class="chapter" data-level="7.3.6" data-path="scale-with-workflows-exercises.html"><a href="scale-with-workflows-exercises.html#session-info"><i class="fa fa-check"></i><b>7.3.6</b> Session Info</a></li>
<li class="chapter" data-level="7.3.7" data-path="scale-with-workflows-exercises.html"><a href="scale-with-workflows-exercises.html#view-your-new-data-table"><i class="fa fa-check"></i><b>7.3.7</b> View your new Data Table</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="scale-with-workflows-exercises.html"><a href="scale-with-workflows-exercises.html#explore-dockstore-workflows"><i class="fa fa-check"></i><b>7.4</b> Explore Dockstore Workflows</a></li>
<li class="chapter" data-level="7.5" data-path="scale-with-workflows-exercises.html"><a href="scale-with-workflows-exercises.html#run-qc-analysis-pipeline"><i class="fa fa-check"></i><b>7.5</b> Run qc-analysis-pipeline</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="scale-with-workflows-instructor-guide.html"><a href="scale-with-workflows-instructor-guide.html"><i class="fa fa-check"></i><b>8</b> Instructor Guide</a>
<ul>
<li class="chapter" data-level="8.1" data-path="scale-with-workflows-instructor-guide.html"><a href="scale-with-workflows-instructor-guide.html#timeline-1"><i class="fa fa-check"></i><b>8.1</b> Timeline</a></li>
<li class="chapter" data-level="8.2" data-path="scale-with-workflows-instructor-guide.html"><a href="scale-with-workflows-instructor-guide.html#example"><i class="fa fa-check"></i><b>8.2</b> Example</a></li>
</ul></li>
<li class="part"><span><b>Create Workflows With Galaxy</b></span></li>
<li class="chapter" data-level="9" data-path="create-workflows-with-galaxy-overview.html"><a href="create-workflows-with-galaxy-overview.html"><i class="fa fa-check"></i><b>9</b> Overview</a>
<ul>
<li class="chapter" data-level="9.1" data-path="create-workflows-with-galaxy-overview.html"><a href="create-workflows-with-galaxy-overview.html#learning-objectives-2"><i class="fa fa-check"></i><b>9.1</b> Learning Objectives</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="create-workflows-with-galaxy-preparation.html"><a href="create-workflows-with-galaxy-preparation.html"><i class="fa fa-check"></i><b>10</b> Preparation</a>
<ul>
<li class="chapter" data-level="10.1" data-path="create-workflows-with-galaxy-preparation.html"><a href="create-workflows-with-galaxy-preparation.html#review-key-concepts-2"><i class="fa fa-check"></i><b>10.1</b> Review Key Concepts</a></li>
<li class="chapter" data-level="10.2" data-path="create-workflows-with-galaxy-preparation.html"><a href="create-workflows-with-galaxy-preparation.html#clone-workspace-1"><i class="fa fa-check"></i><b>10.2</b> Clone Workspace</a></li>
<li class="chapter" data-level="10.3" data-path="create-workflows-with-galaxy-preparation.html"><a href="create-workflows-with-galaxy-preparation.html#start-cloud-environment-1"><i class="fa fa-check"></i><b>10.3</b> Start Cloud Environment</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="create-workflows-with-galaxy-exercises.html"><a href="create-workflows-with-galaxy-exercises.html"><i class="fa fa-check"></i><b>11</b> Exercises</a>
<ul>
<li class="chapter" data-level="11.1" data-path="create-workflows-with-galaxy-exercises.html"><a href="create-workflows-with-galaxy-exercises.html#import-data"><i class="fa fa-check"></i><b>11.1</b> Import Data</a></li>
<li class="chapter" data-level="11.2" data-path="create-workflows-with-galaxy-exercises.html"><a href="create-workflows-with-galaxy-exercises.html#find-workflow"><i class="fa fa-check"></i><b>11.2</b> Find Workflow</a></li>
<li class="chapter" data-level="11.3" data-path="create-workflows-with-galaxy-exercises.html"><a href="create-workflows-with-galaxy-exercises.html#run-workflow"><i class="fa fa-check"></i><b>11.3</b> Run Workflow</a></li>
<li class="chapter" data-level="11.4" data-path="create-workflows-with-galaxy-exercises.html"><a href="create-workflows-with-galaxy-exercises.html#explore-results"><i class="fa fa-check"></i><b>11.4</b> Explore Results</a></li>
<li class="chapter" data-level="11.5" data-path="create-workflows-with-galaxy-exercises.html"><a href="create-workflows-with-galaxy-exercises.html#export-history"><i class="fa fa-check"></i><b>11.5</b> Export History</a></li>
<li class="chapter" data-level="11.6" data-path="create-workflows-with-galaxy-exercises.html"><a href="create-workflows-with-galaxy-exercises.html#shut-down"><i class="fa fa-check"></i><b>11.6</b> Shut Down</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="create-workflows-with-galaxy-instructor-guide.html"><a href="create-workflows-with-galaxy-instructor-guide.html"><i class="fa fa-check"></i><b>12</b> Instructor Guide</a>
<ul>
<li class="chapter" data-level="12.1" data-path="create-workflows-with-galaxy-instructor-guide.html"><a href="create-workflows-with-galaxy-instructor-guide.html#timeline-2"><i class="fa fa-check"></i><b>12.1</b> Timeline</a></li>
</ul></li>
<li class="divider"></li>
<p style="text-align:center;"> <a href="https://github.com/jhudsl/OTTR_Template" target="blank" > This content was published with</a> <a href="https://bookdown.org/" target="blank"> bookdown by: </a> </p>
<p style="text-align:center;"> <a href="https://hutchdatascience.org/"> The Fred Hutch Data Science Lab </a></p>
<a href="https://hutchdatascience.org/" target="_blank"><img src="https://raw.githubusercontent.com/jhudsl/OTTR_Template/main/style-sets/fhdasl/copy_to_assets/big-dasl-stacked.png" style="width: 80%; padding-left: 34px; padding-top: 8px;"</a>
<p style="text-align:center; font-size: 12px;"> <a href="https://github.com/rstudio4edu/rstudio4edu-book/"> Style adapted from: rstudio4edu-book </a> <a href ="https://creativecommons.org/licenses/by/2.0/"> (CC-BY 2.0) </a></p>
<p style="padding-left: 40px;"><div class="trapezoid" style = "padding-left: 40px;"><span>  <a href="https://forms.gle/AK12iVXTjsB7yCUUA"> Click here to provide feedback</a> <img src="assets/itcr_arrow.png" style=" width: 10%" ></span></div></p>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">AnVIL Demos</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<head>
  <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=10.0,initial-scale=1.0">
  <!--script src="https://kit.fontawesome.com/6a26f47516.js"></script-->
  <!--<script src="assets/hideOutput.js"></script>-->
</head>
        


<div class="hero-image-container"> 
  <img class= "hero-image" src="assets/AnVIL_style/dasl_thin_main_image.png">
</div>
<div id="scale-with-workflows-exercises" class="section level1" number="7">
<h1><span class="header-section-number">7</span> Exercises</h1>
<p>The following exercises will walk you through the process of finding datasets that are stored in AnVIL Workspaces and bringing that data into your own Workspace so that you can analyze it.</p>
<div class="notice">
<p>To follow along with these exercises, you will need to complete the steps described in the <a href="scale-with-workflows-preparation.html#scale-with-workflows-preparation">Preparation</a> guide for this demo.</p>
</div>
<div id="explore-dataset-catalog" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Explore Dataset Catalog</h2>
<p>First we will take a look at the <a href="(https://anvilproject.org/data/)">AnVIL Dataset Catalog</a>. Here you can browse the datasets available on AnVIL.</p>
<p><img src="02-scale-with-workflows_files/figure-html/1K2qqm02W_zPhrOZsUoKj1FvKWcMO0iHgaiVwvcqMrXc_g24306c8bf8a_0_0.png" title="Screenshot of AnVIL Dataset Catalog" alt="Screenshot of AnVIL Dataset Catalog" width="100%" /></p>
<div id="exercise" class="section level3 unnumbered unlisted reflection">
<h3>Exercise</h3>
<p>Use a web browser to navigate to <a href="https://anvilproject.org/data/"><code>anvilproject.org/data/</code></a> and answer the following questions.</p>
<p><strong>Q1.</strong> Which Consortium has the most participants?</p>
<ul>
<li>You can click on a column name to sort by that column.</li>
<li>Click again to switch between ascending and descending.</li>
</ul>
<p><strong>Q2.</strong> Where would you find data from the Genotype-Tissue Expression (GTEx) Project?</p>
<ul>
<li>You can use the filters on the left to find specific datasets. Click on either the Consortium or the Study filter to search for GTEx data.</li>
</ul>
<p><strong>Q3.</strong> How many Workspaces have consent code NRES (No REStrictions on data use)?</p>
<ul>
<li>You can use the filters on the left to browse and narrow down on datasets that fit your needs. Click on the Consent Code filter to select for datasets that you can access.</li>
</ul>
</div>
<p>Now you know how to find AnVIL datasets! To access the data in these datasets, you will need to access the <strong>Terra Workspace</strong> where the data is stored. You can find links to the Terra Workspaces in the Workspaces tab.</p>
<p><img src="02-scale-with-workflows_files/figure-html/1K2qqm02W_zPhrOZsUoKj1FvKWcMO0iHgaiVwvcqMrXc_g24f1d151022_0_4.png" title="Screenshot of AnVIL Dataset Catalog showing Workspaces from the GTEx project.  The &quot;Workspaces&quot; tab is highlighted and has been selected, and the &quot;Terra Workspaces&quot; column is highlighted." alt="Screenshot of AnVIL Dataset Catalog showing Workspaces from the GTEx project.  The &quot;Workspaces&quot; tab is highlighted and has been selected, and the &quot;Terra Workspaces&quot; column is highlighted." width="100%" /></p>
<p>Note that, if a Workspace contains protected data, you will need to obtain the appropriate permissions before you can open the Workspace. For these GTEx datasets, <code>AnVIL_GTEx_public_data</code> (with consent code NRES) is available to anyone on AnVIL, but other GTEx Workspaces require permission to access.</p>
</div>
<div id="explore-hprc-workspace" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> Explore HPRC Workspace</h2>
<p>Next we will explore one of the Workspaces from the AnVIL Dataset Catalog, so you can see where the data lives. For this exercise, we will look at data from the <a href="https://humanpangenome.org/">Human Pangenome Reference Consortium</a>.</p>
<p>You can find the Workspace that contains the data by searching for the “HPRC” Consortium in the AnVIL Dataset Catalog and clicking on the Terra Workspace link, or you can navigate there directly through this link: <a href="https://anvil.terra.bio/#workspaces/anvil-datastorage/AnVIL_HPRC" class="uri">https://anvil.terra.bio/#workspaces/anvil-datastorage/AnVIL_HPRC</a>.</p>
<p><img src="02-scale-with-workflows_files/figure-html/1K2qqm02W_zPhrOZsUoKj1FvKWcMO0iHgaiVwvcqMrXc_g251288a74c6_0_85.png" title="Screenshot of AnVIL Dataset Catalog showing the Human Pangenome Reference Consortium Workspace.  The &quot;Consortium&quot; filter is highlighted and &quot;HPRC&quot; has been selected; the &quot;Workspaces&quot; tab is highlighted and has been selected, and in the Terra Workspaces column the link to the &quot;AnVIL_HPRC&quot; Workspace is highlighted." alt="Screenshot of AnVIL Dataset Catalog showing the Human Pangenome Reference Consortium Workspace.  The &quot;Consortium&quot; filter is highlighted and &quot;HPRC&quot; has been selected; the &quot;Workspaces&quot; tab is highlighted and has been selected, and in the Terra Workspaces column the link to the &quot;AnVIL_HPRC&quot; Workspace is highlighted." width="100%" /></p>
<div id="what-is-a-workspace" class="section level3" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span> What is a Workspace?</h3>
<p>Workspaces are the building blocks of projects in Terra. Inside a Workspace, you can run analyses, launch interactive tools like RStudio and Galaxy, store data, and share results. The <code>AnVIL_HPRC</code> Workspace is being used to store and share data from the Human Pangenome Reference Consortium.</p>
<p>Note that, since you are only a “Reader”, you will be unable to do any computations directly in this Workspace. To run analyses, you will need a Workspace of your own.</p>
<p>Workspaces can serve different purposes. For example, it’s often useful to use one Workspace just for organizing primary data, and then to carry out analyses in a separate Workspace. Storing data in a standalone Workspace helps keep it clean and organized, since it won’t get cluttered up with results and intermediate files from your analyses. It also ensures you can easily see and manage who has access to the data, and allows multiple AnVIL users to use the data without getting in each others’ way.</p>
</div>
<div id="dashboard" class="section level3" number="7.2.2">
<h3><span class="header-section-number">7.2.2</span> Dashboard</h3>
<p>When you first open a Workspace, you will be directed to the <strong>Dashboard</strong> tab. The Dashboard is like a README for the Workspace - it should contain information to help you understand the purpose and organization of the Workspace. On the right, you can see some basic information about the Workspace such as the usernames of the Owners as well as your permission level for the Workspace. The left side typically contains a description of the Workspace’s contents and purpose.</p>
<p><img src="02-scale-with-workflows_files/figure-html/1K2qqm02W_zPhrOZsUoKj1FvKWcMO0iHgaiVwvcqMrXc_g251288a74c6_0_94.png" title="Screenshot of the Dashboard for the Human Pangenome Reference Consortium Workspace." alt="Screenshot of the Dashboard for the Human Pangenome Reference Consortium Workspace." width="100%" /></p>
</div>
<div id="exercise-1" class="section level3 unnumbered unlisted reflection">
<h3>Exercise</h3>
<p><strong>Q1.</strong> What three strategies were used to build pangenomes?</p>
<ul>
<li>Look through the Workspace’s description to see what information has been provided about the data in this Workspace.</li>
</ul>
</div>
<div id="data" class="section level3" number="7.2.3">
<h3><span class="header-section-number">7.2.3</span> Data</h3>
<p>The <strong>Data</strong> tab contains all the files associated with the Workspace - data, metadata, workflow outputs, etc. Terra provides <strong>Data Tables</strong> to help organize data and results.</p>
<p><img src="02-scale-with-workflows_files/figure-html/1K2qqm02W_zPhrOZsUoKj1FvKWcMO0iHgaiVwvcqMrXc_g24f280a88cb_0_25.png" title="Screenshot of the Data tab for the Human Pangenome Reference Consortium Workspace.  The &quot;TABLES&quot; menu is expanded and highlighted." alt="Screenshot of the Data tab for the Human Pangenome Reference Consortium Workspace.  The &quot;TABLES&quot; menu is expanded and highlighted." width="100%" /></p>
</div>
<div id="exercise-2" class="section level3 unnumbered unlisted reflection">
<h3>Exercise</h3>
<p>Take a minute to look through the Data Tables for the <code>AnVIL_HPRC</code> Workspace.</p>
<p><strong>Q2.</strong> What demographic information is available in the Data Table named <code>participant</code>?</p>
<p><strong>Q3.</strong> What types of files are linked to in the Data Table named <code>assembly_sample</code>?</p>
<ul>
<li>If you’re not sure what these files are from looking at the column and file names, check the Workspace Dashboard for more information about the assemblies.</li>
</ul>
</div>
<p>A key feature of Terra is that <strong>Data Tables can link to files in other Workspaces</strong> or even files that live outside of Terra. This means that you don’t need to maintain your own copy of AnVIL datasets; you can simply link to the data from a Data Table within your own Workspace to use it in your workflows.</p>
</div>
<div id="combine-data-workspace" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> Combine Data Workspace</h2>
<p>Next we will go over how to set up a Data Table so that you can use data from another Workspace in your own analysis.</p>
<div class="notice">
<p>For this exercise, you will need your own copy of the <a href="https://anvil.terra.bio/#workspaces/anvil-outreach/demos-combine-data-workspaces"><code>demos-combine-data-workspaces</code></a> Workspace. If you have not already done so, follow the instructions in the <a href="scale-with-workflows-preparation.html#scale-with-workflows-preparation">Preparation</a> section to clone a copy of the Workspace now.</p>
</div>
<div id="open-your-workspace" class="section level3" number="7.3.1">
<h3><span class="header-section-number">7.3.1</span> Open your Workspace</h3>
<p>To get started, navigate to your cloned copy of <code>demos-combine-data-workspaces</code>.</p>
<p>You can find your Workspace in Terra by clicking on “Workspaces” in the dropdown menu, or you can go there directly at <a href="https://anvil.terra.bio/#workspaces"><code>anvil.terra.bio/#workspaces</code></a>. Once there, you should see your Workspace under the “MY WORKSPACES” tab. It may also show up in your recently viewed Workspaces. Click on the Workspace name to open it. <strong>Make sure you are in <em>your copy</em> of the Workspace.</strong> If you are in the original Workspace, you will not have permission to start up Jupyter and run commands.</p>
<p><img src="02-scale-with-workflows_files/figure-html/1K2qqm02W_zPhrOZsUoKj1FvKWcMO0iHgaiVwvcqMrXc_g24f280a88cb_0_44.png" title="Screenshot of Terra Workspaces page with the &quot;My Workspaces&quot; tab selected.  The name of the Workspace is highlighted." alt="Screenshot of Terra Workspaces page with the &quot;My Workspaces&quot; tab selected.  The name of the Workspace is highlighted." width="100%" /></p>
</div>
<div id="open-jupyter-notebook" class="section level3" number="7.3.2">
<h3><span class="header-section-number">7.3.2</span> Open Jupyter Notebook</h3>
<p>There are multiple ways to manage Data Tables on AnVIL; for this exercise we will use the <a href="https://bioconductor.org/packages/release/bioc/html/AnVIL.html"><code>Anvil</code></a> R package, which we will run using a Jupyter cloud environment. The <code>AnVIL</code> package provides a wide range of functions for programmatically interacting with AnVIL.</p>
<p>To help you get started, we have provided a copy of a Jupyter Notebook that uses the <code>AnVIL</code> package to create Data Tables linking out to data in another Workspace. For this exercise, you will make a couple of adjustments to the Notebook, so that it links properly to <em>your</em> Workspace (instead of the original Workspace).</p>
<p>Within your Workspace, the ANALYSIS tab holds your Notebooks (Jupyter and R Markdown).</p>
<p><img src="02-scale-with-workflows_files/figure-html/1K2qqm02W_zPhrOZsUoKj1FvKWcMO0iHgaiVwvcqMrXc_g251288a74c6_0_0.png" title="Screenshot of Terra Workspace with the &quot;ANALYSES&quot; tab selected and highlighted.  The page shows a list of Jupyter and R Notebooks." alt="Screenshot of Terra Workspace with the &quot;ANALYSES&quot; tab selected and highlighted.  The page shows a list of Jupyter and R Notebooks." width="100%" /></p>
<p>By clicking on a Notebook, you can preview a static copy of the Notebook. Clicking the “OPEN” button launches the Notebook in a cloud environment so that you can edit and run code. (The “PLAYGROUND” option also lets you edit and run code, but your changes will not be saved.)</p>
<p><img src="02-scale-with-workflows_files/figure-html/1K2qqm02W_zPhrOZsUoKj1FvKWcMO0iHgaiVwvcqMrXc_g251288a74c6_0_13.png" title="Screenshot of a preview of a Jupyter Notebook in a Terra Workspace.  The &quot;OPEN&quot; button is highlighted." alt="Screenshot of a preview of a Jupyter Notebook in a Terra Workspace.  The &quot;OPEN&quot; button is highlighted." width="100%" /></p>
</div>
<div id="exercise-3" class="section level3 unnumbered unlisted reflection">
<h3>Exercise</h3>
<p>In your Workspace, navigate to the “ANALYSIS” tab.</p>
<p>Click on <code>combine-data-workspaces.ipynb</code> to view the Notebook for this exercise, and click the “Open” button so you can edit and run it.</p>
<ul>
<li>The Notebook will launch quickly if you already have a Jupyter Cloud Environment set up.</li>
<li>If Jupyter is not already set up, the configuration menu will appear. The default settings are fine for this exercise, so scroll to the bottom and click “Create”. It will take a few minutes for Jupyter to start up.</li>
</ul>
</div>
<p>This Notebook has four code cells that you will run, after making some edits.</p>
<div id="load-packages" class="section level3" number="7.3.3">
<h3><span class="header-section-number">7.3.3</span> Load Packages</h3>
<p>The first code cell loads R packages that are needed for this exercise. You do not need to make any adjustments here.</p>
</div>
<div id="exercise-4" class="section level3 unnumbered unlisted reflection">
<h3>Exercise</h3>
<p><strong>1.</strong> Click on the first code cell, then click the Run button to load the packages.</p>
</div>
<div id="retrieve-original-file-locations" class="section level3" number="7.3.4">
<h3><span class="header-section-number">7.3.4</span> Retrieve original file locations</h3>
<p>The next two cells find the links to the original data. Here we are bringing in data from two different Workspaces, <a href="https://anvil.terra.bio/#workspaces/anvil-datastorage/AnVIL_HPRC"><code>AnVIL_HPRC</code></a> and <a href="https://anvil.terra.bio/#workspaces/anvil-datastorage/1000G-high-coverage-2019"><code>1000G-high-coverage-2019</code></a>, which contains data from the <a href="https://humanpangenome.org/">Human Pangenome Reference Consortium</a> and the <a href="https://www.internationalgenome.org/">1000 Genomes Project</a>, respectively.</p>
<ul>
<li><code>avworkspace( "anvil-datastorage/AnVIL_HPRC" )</code> tells the AnVIL package what Workspace to access</li>
<li><code>df_sample_HPRC &lt;- avtable( "sample" ) %&gt;%</code> tells it to look at the table named “sample”.</li>
<li>The subsequent commands select which columns and rows to import into our Workspace. These commands differ between the two code blocks because the Tables in the two source Workspaces have different structures.</li>
<li><code>slice_head( n=2 )</code> gets only the first two samples.</li>
</ul>
<div class="notice">
<p>It’s often a good idea to start off a new analysis by working with just a few samples. This can help you minimize wasted time and computing expenses while you figure out your pipeline, and can also help you estimate what your costs will be for processing larger dataset before committing to a large Workflow run.</p>
</div>
<p>To keep this exercise short and cheap, we’re just importing a few samples into your Workspace, but when working on your own projects you can use the same process to import whole tables.</p>
<p>It does not cost anything to add these samples to your Data Table, since you are not storing them in your own Workspace, only linking to them in another Workspace. Costs come into it when you start running analyses on the samples (as we will in a later exercise), so take care not to unintentionally run an expensive analysis on a large table of samples.</p>
</div>
<div id="exercise-5" class="section level3 unnumbered unlisted reflection">
<h3>Exercise</h3>
<p><strong>2.</strong> Modify the code in both cells to get 3 samples instead of 2, and run each cell.</p>
<p>You should see a table listing out the samples appear below each cell. Confirm that there are 3 samples in each table.</p>
</div>
<p>This step chose the samples we want from the original Workspace, but has not yet created a Data Table that links to them in your own Workspace.</p>
<div id="exported-combined-data-table" class="section level3" number="7.3.5">
<h3><span class="header-section-number">7.3.5</span> Exported combined Data Table</h3>
<p>The next code block accomplishes a few things:</p>
<ol style="list-style-type: decimal">
<li>The <code>bind_rows()</code> command combines data from the two different Workspaces into a single data table, so that you can conveniently work with all the data at once in your Workflows. It also adds a column to keep track of which samples came from which original Workspace.</li>
<li><code>avtable_import( entity="sample_id", namespace="anvil-outreach", name="demos-combine-data-workspaces" )</code> creates a Data Table in your Workspace that links to the original data, so that you can easily use it in your analyses. <strong>This is the line that we need to modify</strong> so that the Data Table is created in <em>your</em> Workspace.</li>
</ol>
</div>
<div id="exercise-6" class="section level3 unnumbered unlisted reflection">
<h3>Exercise</h3>
<p>You will need two pieces of information so that the AnVIL package can locate your Workspace to create the new Data Table:</p>
<ol style="list-style-type: decimal">
<li>The <code>namespace</code> (the Workspace’s Billing Project)</li>
<li>The Workspace <code>name</code></li>
</ol>
<p>You can find both of these at the end of the URL for your Workspace which is structured like this:</p>
<pre><code>anvil.terra.bio/#workspaces/namespace/name</code></pre>
<p>For example, for this Workspace:</p>
<pre><code>https://anvil.terra.bio/#workspaces/anvil-outreach/demos-combine-data-workspaces_KCox_20230616</code></pre>
<ul>
<li>The <code>namespace</code> is <code>anvil-outreach</code></li>
<li>The <code>name</code> is <code>demos-combine-data-workspaces_KCox_20230616</code></li>
</ul>
<p><strong>3.</strong> Modify the code in your Notebook so that it points to your Workspace, and run the cell.</p>
<p>If this command is successful, you will not see your new table in your Notebook, but if you look in the Data tab of your Workspace you should now see the <code>sample</code> Data Table has 6 rows in it.</p>
</div>
<div id="session-info" class="section level3" number="7.3.6">
<h3><span class="header-section-number">7.3.6</span> Session Info</h3>
<p>It’s generally a good idea to document information about the packages (and their versions) you used while running the analysis. The last codeblock uses the <code>sessionInfo()</code> command to do just that.</p>
</div>
<div id="view-your-new-data-table" class="section level3" number="7.3.7">
<h3><span class="header-section-number">7.3.7</span> View your new Data Table</h3>
<p>As a last step, take a look at the Data Tab in your Workspace. You should now see a table named <code>sample</code> that contains 6 rows - 3 with project “HPRC” and 3 with project “1000G”.</p>
<p><img src="02-scale-with-workflows_files/figure-html/1K2qqm02W_zPhrOZsUoKj1FvKWcMO0iHgaiVwvcqMrXc_g251288a74c6_0_19.png" title="Screenshot of Terra Workspace with the &quot;DATA&quot; tab selected.  The &quot;sample&quot; Data Table is selected and highlighted, and the page shows a Data Table with 6 rows in it." alt="Screenshot of Terra Workspace with the &quot;DATA&quot; tab selected.  The &quot;sample&quot; Data Table is selected and highlighted, and the page shows a Data Table with 6 rows in it." width="100%" /></p>
<div class="notice">
<p>Note that for this exercise we preloaded the Workspace with 4 samples - if you only see 4 rows then double check your Notebook:</p>
<ul>
<li>Did you remember to “Run” each code cell after you edited it?</li>
<li>Did you change the number of samples to link from 2 to 3 for each table?</li>
<li>Did you update the <code>avtable_import</code> command to point to your Workspace?</li>
</ul>
<p>If you run into any trouble, don’t worry! You can carry out the remaining exercises using the 4 samples we provided for you, and you can visit our community support forum at <a href="https://help.anvilproject.org/"><code>help.anvilproject.org</code></a> with any questions.</p>
</div>
</div>
</div>
<div id="explore-dockstore-workflows" class="section level2" number="7.4">
<h2><span class="header-section-number">7.4</span> Explore Dockstore Workflows</h2>
<p>Once you have set up Data Tables in your Workspace, you can analyze the data using Workflows. To introduce you to Workflows, we will first take a look at the AnVIL Workflows available through <a href="https://dockstore.org/">Dockstore</a>.</p>
<p>The Dockstore platform is a repository for scalable bioinformatics tools and workflows.</p>
<p><img src="02-scale-with-workflows_files/figure-html/1K2qqm02W_zPhrOZsUoKj1FvKWcMO0iHgaiVwvcqMrXc_g24306c8bf8a_0_30.png" title="Screenshot of Dockstore home page." alt="Screenshot of Dockstore home page." width="100%" /></p>
<p>You can find Workflows for AnVIL by clicking on the “Organizations” tab and searching for AnVIL.</p>
<p><img src="02-scale-with-workflows_files/figure-html/1K2qqm02W_zPhrOZsUoKj1FvKWcMO0iHgaiVwvcqMrXc_g24306c8bf8a_0_390.png" title="Screenshot of Dockstore Organizations page.  The searchbox is highlighted, and the text &quot;anvil&quot; has been entered.  The card for the AnVIL organization is highlighted." alt="Screenshot of Dockstore Organizations page.  The searchbox is highlighted, and the text &quot;anvil&quot; has been entered.  The card for the AnVIL organization is highlighted." width="100%" /></p>
<p>Here you can find many Workflows which you can import into your AnVIL Workspace to use in your own analyses. These Workflows are organized into collections to make them easier to find.</p>
<div id="exercise-7" class="section level3 unnumbered unlisted reflection">
<h3>Exercise</h3>
<p>Go to <a href="https://dockstore.org/"><code>dockstore.org</code></a>, find the AnVIL Organization, and take a look at the Workflows that are available.</p>
<p><strong>Q1.</strong> How many GATK4 workflows focus on CNVs?</p>
</div>
<p>Now let’s take a look at the <code>qc-analysis-pipeline</code>, which we will be running on our data.</p>
<p>Under the AnVIL Organization is a collection called “Quality Control Workflows”. Here you can find the <code>qc-analysis-pipeline</code>.</p>
<p><img src="02-scale-with-workflows_files/figure-html/1K2qqm02W_zPhrOZsUoKj1FvKWcMO0iHgaiVwvcqMrXc_g251288a74c6_0_44.png" title="Screenshot of Dockstore page for the Quality Control Workflows collection from the AnVIL organization.  The card for the qc-analysis-pipeline Workflow is highlighted." alt="Screenshot of Dockstore page for the Quality Control Workflows collection from the AnVIL organization.  The card for the qc-analysis-pipeline Workflow is highlighted." width="100%" /></p>
<p>Clicking on the name of the Workflow will bring you to a page with detailed information about the Workflow, including the .wdl files for the Workflow.</p>
<p><img src="02-scale-with-workflows_files/figure-html/1K2qqm02W_zPhrOZsUoKj1FvKWcMO0iHgaiVwvcqMrXc_g251288a74c6_0_35.png" title="Screenshot of Dockstore page for the qc-analysis-pipeline Workflow.  The Files tab is highlighted and has been selected, and part of a wdl files can be seen." alt="Screenshot of Dockstore page for the qc-analysis-pipeline Workflow.  The Files tab is highlighted and has been selected, and part of a wdl files can be seen." width="100%" /></p>
<p>From here, you can import the Workflow into your Workspace using the Launch button. <strong>Don’t do this right now</strong>, or, if you do, import it with a different name (not <code>qc-analysis-pipeline</code>) so you don’t overwrite the Workflow that already exists in your Workspace.</p>
<p><img src="02-scale-with-workflows_files/figure-html/1K2qqm02W_zPhrOZsUoKj1FvKWcMO0iHgaiVwvcqMrXc_g251288a74c6_0_52.png" title="Screenshot of Dockstore page for the qc-analysis-pipeline Workflow.  The Launch button for AnVIL is highlighted." alt="Screenshot of Dockstore page for the qc-analysis-pipeline Workflow.  The Launch button for AnVIL is highlighted." width="100%" /></p>
<p>There are some additional configuration steps that are needed to make sure the Workflow is set up properly to run on the desired files in your Workspace. For the sake of time, we have provided a preconfigured version of this Workflow in the Workspace you cloned. You can learn more about configuring Workflows in the <a href="https://support.terra.bio/hc/en-us/sections/360004147011">Terra Documentation on Workflows</a>.</p>
</div>
<div id="run-qc-analysis-pipeline" class="section level2" number="7.5">
<h2><span class="header-section-number">7.5</span> Run qc-analysis-pipeline</h2>
<p>For our final exercise, we will run the <code>qc-analysis-pipeline</code> on the data we retrieved. Note that Workflow runs can take a few hours to go through, so this exercise will walk you through submitting it, but you will need to check back later for the results. You should receive an email when it’s done (at the email address you use for AnVIL).</p>
<p>AnVIL Workspaces have two tabs dedicated to Workflows</p>
<ul>
<li>The “WORKFLOWS” tab is where you configure and submit Workflow runs for processing.</li>
<li>The “JOB HISTORY” tab is where you monitor the progress of submitted Workflows.</li>
</ul>
<p>Under the “WORKFLOWS” tab you will see any Workflows that have been imported into your Workspace. If you import a Workflow from Dockstore (using the Launch with AnVIL button) or from another Workspace, you will see it here. For this exercise, the <code>qc-analysis-pipeline</code> has already been imported for you.</p>
<p><img src="02-scale-with-workflows_files/figure-html/1K2qqm02W_zPhrOZsUoKj1FvKWcMO0iHgaiVwvcqMrXc_g251288a74c6_0_65.png" title="Screenshot of Terra Workspace with the &quot;WORKFLOWS&quot; tab selected.  The qc-analysis-pipeline card is highlighted." alt="Screenshot of Terra Workspace with the &quot;WORKFLOWS&quot; tab selected.  The qc-analysis-pipeline card is highlighted." width="100%" /></p>
<div id="exercise-8" class="section level3 unnumbered unlisted reflection">
<h3>Exercise</h3>
<p>Go to your Workspace on AnVIL and open the “WORKFLOWS” tab.</p>
<p><strong>1.</strong> Click on the <code>qc-analysis-pipeline</code> card to configure the Workflow.</p>
<p><strong>2.</strong> Confirm settings</p>
<ul>
<li>“Run workflow(s) with inputs defined by data table” is selected</li>
<li>The root entity type should be “sample”. This means it will look at the “sample” Data Table to find inputs.</li>
</ul>
<p><strong>3.</strong> Choose samples - click the “SELECT DATA” button and check the samples you want to run the Workflow on. You should see 6 samples.</p>
<p><strong>4.</strong> Click the “RUN ANALYSIS” button.</p>
</div>
<p>You can view the status of your Workflow run by navigating to the “JOB HISTORY” tab. You can see more details by clicking on the name of the Workflow in the “Submission” column.</p>
<p><img src="02-scale-with-workflows_files/figure-html/1K2qqm02W_zPhrOZsUoKj1FvKWcMO0iHgaiVwvcqMrXc_g251288a74c6_0_78.png" title="Screenshot of Terra Workspace with the &quot;JOB HISTORY&quot; tab selected and highlighted.  The qc-analysis-pipeline submission is highlighted." alt="Screenshot of Terra Workspace with the &quot;JOB HISTORY&quot; tab selected and highlighted.  The qc-analysis-pipeline submission is highlighted." width="100%" /></p>
<p>Once your Workflow run is complete, you will be able to view the results in your Workspace’s “DATA” tab.</p>
</div>
</div>
<hr>
<center> 
  <div class="footer">
      All illustrations <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY. </a>
      <br>
      All other materials <a href= "https://creativecommons.org/licenses/by/4.0/"> CC-BY </a> unless noted otherwise.
  </div>
</center>
            </section>

          </div>
        </div>
      </div>
<a href="scale-with-workflows-preparation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="scale-with-workflows-instructor-guide.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
